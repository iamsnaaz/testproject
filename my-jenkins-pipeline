pipeline{
    agent any
    environment{
        New_Version = "1.3.02"
    }
	tools {
        // Install the Maven version configured as "M3" and add it to the path.
        maven "M2"
    }
    stages{
	    stage("check file"){
            steps{
                    script{
                        if (fileExists('C:/ProgramData/Jenkins/.jenkins/workspace/my-pipeline/pom.xml')){
                            echo "file found"}
                        }
                    
            }
         }
        stage('Build'){
            steps{
			sh "mvn -Dmaven.test.failure.ignore=true clean package"
			echo "Building version: ${New_Version}"
            }
        }
        stage('Test'){
            steps{
                  echo "Test stage"
            }
        }
        stage('Deploy'){
            steps{
                  withCredentials([usernamePassword(credentialsId: 'server-credentials', passwordVariable: 'pwd', usernameVariable: 'uname')]) {
                  echo "Deploy stage"
                    }
                 
            }
        }
    }
	post{
		always{
			echo "This is a jenkins file"
		}
		
	}
}
